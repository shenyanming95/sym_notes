# 1.架构修炼之道

优秀的架构师一定是**修心**的。心形，是架构师区别于一般软件工程师的地方，主要有这三个方面：

1. 同理心的修炼：认同他人的能力
2. 全局观的修炼：保持好奇心和韧性
3. 迭代能力的修炼：学会否定自己

## 1.1.同理心的修炼

架构师最重要的心性修炼：**认同他人的能力**。架构师最重要的是有同理心，**读懂别人的设计思想**，不要在没有全面理解他人思想的情况下去调整既有代码的设计逻辑。

## 1.2.全局观的修炼

架构之道，是虚实结合之道，并不是说理解了架构思维的原则，就能做好架构。**从实悟虚，从虚就实**。保持对这个世界的好奇心，看到新科技与新思想，先认同它再体会它，理解它产生的需求背景与技术脉络，从而融入自己的知识体系。

## 1.3.迭代能力的修炼

架构师的第三大能力修炼，是迭代，是反思，是自我批判。逐步将之前写的代码改到你满意的样子，通过迭代而升华，才是架构能力提升之路。

# 2.架构设计的基本准则

- KISS：简单比复杂好
- Modularity：着眼于模块而不是框架
- Testable：保证可测试性
- Orthogonal Decomposition：正交分解

## 2.1.KISS

KISS 全称是 Keep it Simple, Stupid，用最直白的话说，“简单就是美”。不增加无谓的复杂性。正确理解系统的需求之后才进行设计。要避免过度设计。

- 强调的是易实施性。让模块容易实现，实现的时候心智负担低，比复杂的优化更重要。
- 主张让代码符合惯例，接口语义要自然，最好让人一看方法名就知道怎么回事。

## 2.2.Modularity

Modularity 强调的是模块化。从架构设计角度来说，模块的接口，比模块的实现机制更重要。应**着眼于模块而不是框架**。框架是易变的，框架是业务流，可复用性相对更低。框架都将经历不断发展演化的过程，逐步得到完善。**不让模块为框架买单**，模块设计时应忽略框架的存在。认真审视模块的接口，发现其中“过度的（或多余的）” 约束条件，把它提高到足够通用的、普适的场景来看。

## 2.3.Testable

Testable，强调的是模块的可测试性。设计应该以可测试性为第一目标。可测试往往意味着低耦合。**一个模块可以很方便地进行测试，那么就可以说它是一个设计优良的模块**。模块测试的第一步是环境模拟。模块依赖的模块列表、模块的输入输出，这些是模块测试的需要，也是模块耦合度的表征。

可测试性不单单因为是耦合的需要。测试能够发现模块构架调整的潜在问题。通常模块在架构调整期（代码重构）最容易引入 Bug， 只有在模块开发过程中我们就不断积累典型的测试数据，以案例的形式固化所有已知 Bug，才可能在架构调整等最容易引发问题的情形下获得最佳的效果。

## 2.4.Orthogonal Decomposition

Orthogonal Decomposition，中文的意思是 “正交分解”。架构就是不断地对系统进行正交分解的过程。

正交分解，第一件事情就是要分出哪些是核心系统，哪些是周边子系统。“优先考虑组合，而不是继承”，用正交分解的角度来诠释这句话，它本质上是鼓励做乘法而不是做加法。组合是乘法，它让我们用相互正交、完全没有相关性的模块，组合出我们要的业务场景。而继承是加法，通过叠加能力把一个模块改造成另一个模块。

# 3.少谈框架,多谈业务

# 3.1.架构是共识确认的过程

【模块的接口，是架构设计的核心】

1. 精确描述架构的方法是定义每个**模块的接口，接口用代码表达**。这种表达是精确的、无歧义的。架构图只是辅助模块接口，用于说明模块接口之间的关联。
2. 在系统设计（概要设计）阶段，把框架代码写出来，真真正正用代码（而不是伪代码），把所有用户故事全局过一遍，确认模块之间的接口串联是可以正常工作

这样做的好处是，把联调工作做到了前头，工程的最大风险就得到了管理。剩下来的就是每个模块自身的好坏，这就和组织能力无关，只取决于招聘的工程师个体素质了。

## 3.2.别让框架绑架业务

架构的两侧，一边是用户需求，一边是技术。接口代表用户需求，代表业务。框架代表技术，是满足需求的方法。框架需要经受变化，它需要适应需求的演进过程。**抓住稳定的东西，比追逐变化更重要**。

1. 框架，体现的是需求泛化的能力。从架构思维角度上来说，它是通过抽象出需求模板，把多个需求场景中变化的部分抽离出来，形成相对稳定的泛化需求。
2. 如何持续保证系统洁净？答案是：**连接性的代码越少越好**。所谓连接性的代码，就是把两个子的业务系统连接，构成一个大业务场景的代码。如果有大业务场景，应该抽象出新的更大范畴的业务系统。
3. 每个模块都是一个业务。抽象出符合业务自然语义的接口，远比抽象出泛需求的框架容易多。

### 3.3.别用实现替代业务

【比框架（架构图）更重要的是数据结构，比数据结构更重要的是接口；】

用实现机制替代业务的典型案例是定义了数据结构，但是不抽象数据的业务逻辑，直接让使用方操作成员变量，或者定义一堆成员变量的 get/set 接口。