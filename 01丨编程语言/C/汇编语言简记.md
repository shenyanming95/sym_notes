# 1.指令

## 1.1.数据传送和算术运算

| 指令    | 作用                                                         |
| ------- | ------------------------------------------------------------ |
| mov     | 将源操作数复制到目的操作数（可以实现赋值语句）               |
| xchg    | 交换两个操作数的内容，例如 xchg %ax,%bx                      |
| inc/dec | 寄存器或内存操作数加1/减1                                    |
| add     | 将长度相同的两个操作数进行相加操作，结果存入目的操作数。<br />例如： add %ax,%bx，即bx+=ax。注意不同的cpu语法不同，同一个指令但效果却是 ax+=bx |
| sub     | 从目的操作数中减去源操作数                                   |

## 1.2.位运算

| 指令    | 作用                                                         |
| ------- | ------------------------------------------------------------ |
| and     | 按位与。常用技巧：char* p;(p & -8)进行8字节对齐              |
| or      | 按位或                                                       |
| xor     | 按位异或                                                     |
| not     | 按位取反                                                     |
| shl/shr | 操作数按位向左/右移动。根据不同的补充空位的方法，可以分为算术/逻辑/循环等不同的类型。<br />左移相当于乘2，右移相当于除以2。 |

## 1.3.条件分支

| 指令    | 作用                                                         |
| ------- | ------------------------------------------------------------ |
| test    | 在两个操作数的对应位之间进行and操作，并根据运算结果设置符号标志位、零标志位和奇偶标志位 |
| cmp     | 比较整数。执行从目的操作数中减去源操作数的隐含减法操作，并且不修改任何操作数 |
| jmp     | 跳转指令，控制流转向目标地址执行。可以影响RIP                |
| j(cond) | 条件跳转。只有标记位满足某个条件时才会发生跳转。例如，JZ表示为零跳转，JG表示大于跳转，JLE表示小于等于跳转等 |

## 1.4.函数调用

| 指令 | 作用                                                         |
| ---- | ------------------------------------------------------------ |
| call | 用于函数调用。对控制流的影响和jmp指令一样。它与jmp指令最大的不同是：call指令会把它的下一跳指令压入栈上，等待从被调用者返回时再恢复到下一条指令执行。<br />call指令传递参数的方法根据不同的操作系统会有不同，例如linux规定在64位x86寄存器上，前6个整型参数要通过rdi、rsi、rdx、rcx、r8、r9来传递。一个操作系统关于入参方式的规定就是应用程序二进制接口（Application Binary Interface，ABI） |
| ret  | 从被调用者返回。跳转的目标地址是从栈上取到的，这也是call指令压入的那个地址，即call指令的下一条地址。<br />整型或者指针类型的返回值在rax中。 |

## 1.5.字符串处理

| 指令       | 作用                                                       |
| ---------- | ---------------------------------------------------------- |
| movsb(w,d) | 传送字符串数据，将ESI寻址的内存数据复制到EDI寻址的内存位置 |
| cmpsb      | 比较字符串。比较ESI和EDI寻址的内存数据                     |
| scasb      | 扫描字符串：比较累加器EAX和EDI寻址的内存数据               |
| stosb      | 保存字符串：将累加器EAX的内容保存到EDI寻址的位置           |
| lodsb      | 从字符串加载到累加器：将ESI寻址的内存数据加载到累加器      |
| rep        | ECX>0时重复。举例：传送10个字符串: mov $10,%ecx;rep movsb  |
